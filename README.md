# Информационный веб-сервис бронирования и продажи билетов в кинотеатр

Дипломный проект на курсе СберУниверситета "Java Developer: от Hello World до собственного клиент-серверного приложения".

- Приложение разработано на основе Spring Boot.
- Для организации клиентской части использован Spring MVC и шаблонизатор Thymeleaf.
- Используется СУБД PostgreSQL, взаимодействие с которой осуществляется средствами Spring Data JPA.
- Безопасность (аутентификация, авторизация) обеспечена с помощью Spring Security.
- Организовано логирование в файлы на основе log4j2.
- Реализована интеграция с API Кинопоиска для отображения рейтинга фильмов.
- Написаны интеграционные тесты для MVC контроллеров.

Основной функционал:
- Пользователи могут просматривать афишу и фильтровать ее по дате; просматривать описание фильма, наличие свободных мест на сеансы; после регистрации/входа бронировать/покупать билеты на выбранные места; оставлять отзыв на фильм; просматривать список своих заказов, отменить/выкупить актуальную бронь; редактировать профиль; восстановить пароль через почту.
- Управляющий администрирует контент: может создать конфигурацию мест в зале, блокировать места, добавлять/удалять/редактировать фильмы и сеансы к ним; удалять отзывы; просматривать список и удалять заказы; просматривать результат продажи билетов за выбранный период.
- Администратор может регистрировать управляющего; просматривать список и блокировать пользователей.

## Технологии и инструменты

IntelliJ IDEA | Java17 | Maven | Spring MVC | Thymeleaf | Spring Security | Spring DATA JPA | PostgreSQL | AOP | Lombok | Mockito | JUnit | Docker

## Запуск приложения
1. Клонировать проект командой:  
   git clone https://github.com/lyovinas/cinema-ticket-office.git
2. При запуске приложения в IDE
   - скорректировать параметры подключения к БД в файле src/main/resources/application.properties;
   - при необходимоси запуска БД в Docker - использовть файл docker-compose-db.yml
3. Для запуска приложения и БД в Docker:
   - собрать проект в исполняемый jar-файл с помощью Maven, при необходимости скорректировать файл Dockerfile;
   - запустить файлы docker-compose-db.yml и docker-compose-app.yml
4. Для быстрого создания демонстрационных данных автоматически будут выполнены команды из файла src/main/resources/data.sql. В папке src/main/resources/posters расположены файлы постеров для демонстрационных фильмов.
5. После запуска приложения главная страница доступна по адресу: http://localhost:8080/
6. Параметры входа на сайт
   - для администратора: имя - admin, пароль - admin;
   - для пользователя: имя - u, пароль - u.

## Скриншоты
![image](https://github.com/lyovinas/cinema-ticket-office/blob/master/screenshots.gif)

## Схема базы данных
![image](https://github.com/lyovinas/cinema-ticket-office/blob/master/db_scheme.png)

## Схема вариантов использования
![image](https://github.com/lyovinas/cinema-ticket-office/blob/master/use_case_diagram.png)
